# Protein Shop

Protein Shop — это мобильное приложение для электронной коммерции, предназначенное для покупки протеиновых батончиков и пищевых добавок. Оно включает функции аутентификации пользователей, просмотра товаров, оформления заказов, отслеживания бонусных баллов и управления профилем. Проект состоит из серверной части на Go и клиентской части на React Native, подключенных к базе данных PostgreSQL.

## Содержание
- [Функциональность](#функциональность)
- [Предварительные требования](#предварительные-требования)
- [Установка и запуск](#установка-и-запуск)
  - [Настройка базы данных](#настройка-базы-данных)
  - [Настройка серверной части](#настройка-серверной-части)
  - [Настройка клиентской части](#настройка-клиентской-части)
  - [Запуск приложения](#запуск-приложения)
- [Тестирование](#тестирование)
- [Устранение неполадок](#устранение-неполадок)

## Функциональность
- **Аутентификация**: Регистрация и вход по email/паролю, выход из аккаунта.
- **Каталог товаров**: Просмотр товаров (например, протеин, BCAA) с добавлением в корзину.
- **Заказы**: Оформление заказов и просмотр истории.
- **Бонусные баллы**: 1 балл за каждые $10, просмотр баланса и истории.
- **Профиль**: Отображение email и даты регистрации.
- **Интерфейс**: Удобная навигация с вкладками (Главная, Баллы, Профиль).

## Предварительные требования
- **Go**: v1.21+ (`go version` для проверки)
- **Node.js**: v18+ (`node --version`)
- **Android Studio**: Для эмулятора Android
- **Docker**: Для PostgreSQL (или локальная установка PostgreSQL v14+)
- Убедитесь, что переменные окружения настроены (например, `ANDROID_HOME` для Android Studio).

## Установка и запуск

### Настройка базы данных
1. **Склонируйте репозиторий**:
   ```bash
   git clone https://github.com/your-username/protein-shop.git
   cd protein-shop
   ```
2. **Запустите PostgreSQL через Docker**:
   ```bash
   docker run -d --name postgres -p 5432:5432 -e POSTGRES_USER=protein_shop -e POSTGRES_PASSWORD=securepassword -e POSTGRES_DB=protein_shop_db postgres:14
   ```
3. **Примените схему и данные**:
   ```bash
   psql -h localhost -U protein_shop -d protein_shop_db -f db/schema.sql
   psql -h localhost -U protein_shop -d protein_shop_db -f db/seed.sql
   ```

### Настройка серверной части
1. **Перейдите в папку**:
   ```bash
   cd protein-shop-api
   ```
2. **Установите зависимости**:
   ```bash
   go mod tidy
   ```

### Настройка клиентской части
1. **Перейдите в папку**:
   ```bash
   cd ProteinShopApp
   ```
2. **Установите зависимости**:
   ```bash
   npm install
   ```

### Запуск приложения
1. **Запустите сервер**:
   ```bash
   cd protein-shop-api
   go run main.go
   ```
   API доступен по адресу `http://localhost:8080`.
2. **Запустите клиент**:
   ```bash
   cd ProteinShopApp
   npm start
   ```
   В новом терминале:
   ```bash
   npx react-native run-android
   ```
3. **Протестируйте**:
   - Зарегистрируйтесь: `test@example.com` / `StrongPass123!`.
   - Просмотрите товары, добавьте в корзину, оформите заказ.
   - Проверьте баллы и историю заказов в разделе «Баллы».
   - Выйдите через «Профиль».

## Тестирование
- **Ручное тестирование**:
  - Регистрация, вход, добавление в корзину, заказ, проверка баллов, выход.
  - Краевые случаи: неверный пароль, пустая корзина, отключение сети.
- **Модульные тесты**:
  - Сервер: `cd protein-shop-api && go test ./api`
  - Клиент: `cd ProteinShopApp && npm test`
- **Интеграционное тестирование**:
  - Используйте curl/Postman для проверки API (например, `/auth/register`, `/orders`).

## Устранение неполадок
- **Сервер не запускается**:
  - Проверьте PostgreSQL: `docker ps`.
  - Убедитесь, что порт 8080 свободен: `netstat -aon | findstr 8080`.
  - Ошибки импорта: `go mod tidy`.
- **Клиент не подключается**:
  - Проверьте `http://localhost:8080/health` в браузере.
  - В эмуляторе Android используйте `http://10.0.2.2:8080` в `src/api/api.js`, если `localhost` не работает.
- **Эмулятор не запускается**:
  - Откройте Android Studio, настройте AVD (Pixel 6, API 33).
  - Проверьте переменные окружения: `echo %ANDROID_HOME%`.
- **Ошибки API**:
  - Логи в терминале `go run main.go` или `npm start`.
  - Проверьте токен JWT в `AsyncStorage` (добавьте `console.log` в `api.js`).

---

**Следующие шаги**:
- Добавить поиск товаров.
- Сохранять корзину через `AsyncStorage`.
- Развернуть сервер на Heroku/AWS.
- Собрать APK для Google Play.